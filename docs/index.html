<head>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <div id="chart"></div>
</body>
<script>

	
function makeplot() {
  Plotly.d3.csv("https://krzycz.github.io/demo2/data.csv", function(data){ processData(data) } );
};

function processData(rows) {
  var x = [], c = [], n = [];

  for (var i = 0; i < rows.length; i++) {
    row = rows[i];
    x.push( row['build'] );
    c.push( row['covered'] );
    n.push( row['total'] - row['covered'] );
  }
	
var trace1 = {
  x: x,
  y: c,
  name: 'Covered',
  type: 'bar',
  line: { 
    dash: 'solid',
    color: 'green',
    shape: 'linear',
  },
};

var trace2 = {
  x: x,
  y: n,
  name: 'Not covered',
  type: 'bar',
  line: { 
    dash: 'solid',
    color: 'red',
    shape: 'linear',
  },
};

var data = [ trace1, trace2 ];
var layout = {
	barmode: 'stack',
	title: 'Function coverage',
};

  var plotDiv = document.getElementById("chart");
  Plotly.newPlot(plotDiv, traces, layout);
}
  
makeplot();

</script>
